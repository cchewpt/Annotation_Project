{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>ระบบการกำกับข้อความเชิงบูลลี่ภาษาไทย</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Custom Google font-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
      rel="stylesheet"
    />
    <!-- Bootstrap icons-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{% static 'css/styles.css' %}" rel="stylesheet" />
  </head>

  <body class="d-flex flex-column h-100 bg-dark">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-light py-3 bg-greydarker">
      <div class="container px-5">
        <a class="navbar-brand" href="{% url 'mainlogin' %}">
          <span class="fw-bolder border-rounded" style="color: black">
            ระบบการกำกับข้อความเชิงบูลลี่ภาษาไทย
          </span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0 small fw-bolder">
            <li class="nav-item"><a class="nav-link" href="{% url 'mainlogin' %}">หน้าแรก</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'annotatepage' %}">กำกับข้อความ</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'txtverify' %}">วิเคราะห์ข้อความ</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'texttopost' %}">เสนอข้อความ</a></li>
        </ul>
          <div class="user-profile-box m-lg-0 py-1">
            <div class="d-inline-flex align-items-center">
                <img src="{% static 'assets/profile-placeholder.png' %}" alt="User Picture"
                    style="width: 40px; height: 40px; cursor: pointer" class="rounded-circle me-2"
                    onclick="location.href='{% url 'admin_profile' %}';" />
          
                  <div class="d-md-flex flex-column">
                    <span class="fw-medium" style="color: black; cursor: pointer">ชื่อผู้ใช้: {{ admin_username }}</span> <!-- Using admin_username here -->
                    <a href="{% url 'index' %}" class="d-block fw-semibold text-danger">ออกจากระบบ</a>
                  </div>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <main class="flex-shrink-1">
      <div class="container px-3">
        <div class="row my-5">
          <div class="col-lg-3">
            <div class="pb-3 d-inline-flex align-items-center">
              <div class="d-inline-flex align-items-center">
                <img
                  class="rounded-circle"
                  src="{% static 'assets/profile-placeholder.png' %}"
                  alt="..."
                  style="width: 80px; height: 80px"
                />
              </div>
              <div class="d-md-flex flex-column offset-1">
                <span class="fw-medium text-white" style="color: black"
                  >ชื่อผู้ใช้: {{admin_username}}</span
                >
                <span class="fw-medium text-white" style="color: black"
                  >รหัสผู้ใช้: {{admin_id}}</span
                >
              </div>
            </div>
            <div class="d-grid gap-3">
              <button
                class="btn btn-light d-flex align-items-center"
                type="button"
                onclick="location.href='{% url 'admin_edit_profile' %}';"
              >
                <i class="bi bi-tools me-2"></i> แก้ไขบัญชี
              </button>
              <button
                class="btn btn-light d-flex align-items-center"
                type="button"
                onclick="location.href='{% url 'admin_edit_user' %}';"
              >
                <i class="bi bi-kanban me-2"></i> จัดการบัญชีผู้ใช้
              </button>
              <button
                class="btn btn-light d-flex align-items-center"
                type="button"
                onclick="location.href='{% url 'admin_approved1' %}';"
              >
                <i class="bi bi-check-lg me-2"></i> อนุมัติข้อความเชิงบูลลี่
              </button>
              <button
                class="btn btn-light d-flex align-items-center"
                type="button"
                onclick="location.href='../dist/admin-mng-datasets1.html';"
              >
                <i class="bi bi-pen me-2"></i> เพิ่มลบชุดข้อมูลในการกำกับ
              </button>
              <button
                class="btn btn-light d-flex align-items-center"
                type="button"
              >
                <i class="bi bi-check-lg me-2"></i> ตรวจสอบคะแนนความเชื่อมั่น
              </button>
              <button
                class="btn btn-light d-flex align-items-center"
                type="button"
              >
                <i class="bi bi-gear-fill me-2"></i> จัดการชุดข้อมูลเพื่อฝึกสอนโมเดล
              </button>
              <button
                class="btn btn-light d-flex align-items-center"
                type="button"
              >
                <i class="bi bi-gear-fill me-2"></i> ฝึกสอนโมเดล
              </button>
              <button
                class="btn btn-danger d-flex align-items-center"
                type="button"
              >
                <i class="bi bi-box-arrow-right me-2"></i> ออกจากระบบ
              </button>
            </div>
          </div>

          <!-- Inserted here -->
          <div class="col-lg-9 col-md-12 user-profile-page">
            <!-- User Profile Info -->
            <div class="card user-info-card mb-4">
              <div class="card-body d-flex align-items-center">
                <img
                  src="{% static 'assets/profile-placeholder.png' %}"
                  class="rounded-circle me-3"
                  alt="User profile image"
                  style="width: 60px; height: 60px;"
                />
                <div>
                  {% if user %}
                      <h5 class="card-title mb-0">ชื่อผู้ใช้: {{ user.username }}</h5> <!-- Assuming admin_username is the username -->
                      <p class="card-text">รหัสผู้ใช้: {{ user.user_id }}</p> <!-- Assuming admin_id is the user ID -->
                  {% else %}
                      <h5 class="card-title mb-0">ไม่มีผู้ใช้ที่เลือก</h5>
                  {% endif %}
                </div>
                <div class="ms-auto text-center">
                  <p class="card-text">จำนวนข้อความที่เสนอ: {{ proposed_text_count }}</p>
                </div>
                <a onclick="location.href='{% url 'admin_approved1' %}';" class="btn btn-primary ms-auto">ย้อนกลับ</a>
              </div>
            </div>

            <!-- User Submitted Annotations Table -->
            <div class="table-responsive scrollable-table">
              <table class="table table-bordered table-hover table-white white-text" style="color: white;">  <!-- Set font color to white -->
                <thead>
                  <tr>
                      <th scope="col">ลำดับ</th>
                      <th scope="col">ข้อความที่เสนอ</th>
                      <th scope="col">สถานะ</th>
                  </tr>
                </thead>
                <tbody>
                  {% for text in proposed_texts %}
                  <tr>
                      <th scope="row">{{ forloop.counter }}</th>
                      <td>{{ text.proposed_text }}</td> <!-- Ensure this field exists in your model -->
                      <td class="text-center">
                          <form method="post" action="{% url 'update_text_status' %}" style="display: inline;">
                              {% csrf_token %}
                              <input type="hidden" name="text_id" value="{{ text.text_id }}">
                              <input type="hidden" name="status" value="อนุมัติ">
                              <button type="submit" class="btn btn-success btn-status me-2">อนุมัติ</button>
                          </form>
                          <form method="post" action="{% url 'update_text_status' %}" style="display: inline;">
                              {% csrf_token %}
                              <input type="hidden" name="text_id" value="{{ text.text_id }}">
                              <input type="hidden" name="status" value="ไม่อนุมัติ">
                              <button type="submit" class="btn btn-danger btn-status">ไม่อนุมัติ</button>
                          </form>
                      </td>
                  </tr>
                  {% empty %}
                  <tr>
                      <td colspan="3" class="text-center">ไม่มีข้อความที่เสนอ</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer-->
    <footer class="bg-brightred py-4 mt-auto">
      <div class="container px-5">
        <div
          class="row align-items-center justify-content-between flex-column flex-sm-row"
        >
          <div class="col-auto">
            <div class="small-black m-0">
              ระบบกำกับและทำนายข้อความเชิงบูลลี่ภาษาไทย &copy;
            </div>
          </div>
          <div class="col-auto">
            <a class="small-black">ติดต่อเรา 023342234</a>
            <span class="mx-1">&middot;</span>
            <a class="small-black">Email : info@thaitextbul.co</a>
            <span class="mx-1">&middot;</span>
            <a class="small-black">Line : thaitextbul</a>
          </div>
        </div>
      </div>
    </footer>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
  </body>
</html>
